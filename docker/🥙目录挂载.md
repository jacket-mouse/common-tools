# ğŸ¥™ç›®å½•æŒ‚è½½

### ç°å­˜é—®é¢˜

- ä½¿ç”¨ Docker è¿è¡Œåï¼Œæˆ‘ä»¬æ”¹äº†é¡¹ç›®ä»£ç ä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°`build`å’Œ`run`ï¼Œå¾ˆæ˜¯éº»çƒ¦ã€‚
- å®¹å™¨é‡Œé¢äº§ç”Ÿçš„æ•°æ®ï¼Œä¾‹å¦‚ log æ–‡ä»¶ï¼Œæ•°æ®åº“å¤‡ä»½æ–‡ä»¶ï¼Œå®¹å™¨åˆ é™¤åå°±ä¸¢å¤±äº†ã€‚

> ç›®å½•æŒ‚è½½è§£å†³ä»¥ä¸Šé—®é¢˜

> æœ¬æ–‡æ¡£è¯¾ä»¶é…å¥— [è§†é¢‘æ•™ç¨‹](https://www.bilibili.com/video/BV11L411g7U1?p=4)

### å‡ ç§æŒ‚è½½æ–¹å¼

- `bind mount` ç›´æ¥æŠŠå®¿ä¸»æœºç›®å½•æ˜ å°„åˆ°å®¹å™¨å†…ï¼Œé€‚åˆæŒ‚ä»£ç ç›®å½•å’Œé…ç½®æ–‡ä»¶ã€‚å¯æŒ‚åˆ°å¤šä¸ªå®¹å™¨ä¸Š
- `volume` ç”±å®¹å™¨åˆ›å»ºå’Œç®¡ç†ï¼Œåˆ›å»ºåœ¨å®¿ä¸»æœºï¼Œæ‰€ä»¥åˆ é™¤å®¹å™¨ä¸ä¼šä¸¢å¤±ï¼Œå®˜æ–¹æ¨èï¼Œæ›´é«˜æ•ˆï¼ŒLinux æ–‡ä»¶ç³»ç»Ÿï¼Œé€‚åˆå­˜å‚¨æ•°æ®åº“æ•°æ®ã€‚å¯æŒ‚åˆ°å¤šä¸ªå®¹å™¨ä¸Š
- `tmpfs mount` é€‚åˆå­˜å‚¨ä¸´æ—¶æ–‡ä»¶ï¼Œå­˜å®¿ä¸»æœºå†…å­˜ä¸­ã€‚ä¸å¯å¤šå®¹å™¨å…±äº«ã€‚

æ–‡æ¡£å‚è€ƒï¼šhttps://docs.docker.com/storage/

![image.png](https://cos.easydoc.net/46901064/files/kv96dc4q.png)

### æŒ‚è½½æ¼”ç¤º

```
bind mount` æ–¹å¼ç”¨ç»å¯¹è·¯å¾„ `-v D:/code:/app
volume` æ–¹å¼ï¼Œåªéœ€è¦ä¸€ä¸ªåå­— `-v db-data:/app
```

ç¤ºä¾‹ï¼š
`docker run -p 8080:8080 --name test-hello -v D:/code:/app -d test:v1`

> æ³¨æ„ï¼
> å› ä¸ºæŒ‚è½½åï¼Œå®¹å™¨é‡Œçš„ä»£ç å°±ä¼šæ›¿æ¢ä¸ºä½ æœ¬æœºçš„ä»£ç äº†ï¼Œå¦‚æœä½ ä»£ç ç›®å½•æ²¡æœ‰`node_modules`ç›®å½•ï¼Œä½ éœ€è¦åœ¨ä»£ç ç›®å½•æ‰§è¡Œä¸‹`npm install --registry=https://registry.npm.taobao.org`ç¡®ä¿ä¾èµ–åº“éƒ½å·²ç»å®‰è£…ï¼Œå¦åˆ™å¯èƒ½ä¼šæç¤ºâ€œError: Cannot find module â€˜koaâ€™â€
> å¦‚æœä½ çš„ç”µè„‘æ²¡æœ‰å®‰è£… [nodejs](https://nodejs.org/en/)ï¼Œä½ éœ€è¦å®‰è£…ä¸€ä¸‹æ‰èƒ½æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ã€‚

> è§‰å¾—è€å¸ˆè®²å¾—ä¸é”™çš„è¯ï¼Œè®°å¾—ç‚¹èµã€å…³æ³¨ã€åˆ†äº«ï¼Œé¼“åŠ±ä¸‹è€å¸ˆ
> ä½ ä»¬çš„é¼“åŠ±ä¼šè®©è€å¸ˆæ›´åŠ æœ‰åŠ¨åŠ›ç»§ç»­åˆ›é€ æ›´å¤šæ›´å¥½çš„å†…å®¹

ä½ å¯ä»¥åˆ° [Github issue](https://github.com/gzyunke/test-docker/issues) ç»™æˆ‘æé—®æˆ–åé¦ˆé‡åˆ°çš„é—®é¢˜ã€‚